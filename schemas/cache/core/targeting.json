{
  "$id": "/schemas/3.0.0-beta.1/core/targeting.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Optional geographic refinements for media buys. Most targeting should be expressed in the brief and handled by the publisher. These fields are primarily for geographic restrictions (RCT testing, regulatory compliance).",
  "properties": {
    "axe_exclude_segment": {
      "description": "AXE segment ID to exclude from targeting",
      "type": "string"
    },
    "axe_include_segment": {
      "description": "AXE segment ID to include for targeting",
      "type": "string"
    },
    "frequency_cap": {
      "$ref": "/schemas/3.0.0-beta.1/core/frequency-cap.json"
    },
    "geo_countries": {
      "description": "Restrict delivery to specific countries. ISO 3166-1 alpha-2 codes (e.g., 'US', 'GB', 'DE').",
      "items": {
        "pattern": "^[A-Z]{2}$",
        "type": "string"
      },
      "type": "array"
    },
    "geo_metros": {
      "description": "Restrict delivery to specific metro areas. Each entry specifies the classification system and target values. Seller must declare supported systems in get_adcp_capabilities.",
      "items": {
        "additionalProperties": false,
        "properties": {
          "system": {
            "$ref": "/schemas/3.0.0-beta.1/enums/metro-system.json",
            "description": "Metro area classification system (e.g., 'nielsen_dma', 'uk_itl2')"
          },
          "values": {
            "description": "Metro codes within the system (e.g., ['501', '602'] for Nielsen DMAs)",
            "items": {
              "type": "string"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "system",
          "values"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "geo_postal_areas": {
      "description": "Restrict delivery to specific postal areas. Each entry specifies the postal system and target values. Seller must declare supported systems in get_adcp_capabilities.",
      "items": {
        "additionalProperties": false,
        "properties": {
          "system": {
            "$ref": "/schemas/3.0.0-beta.1/enums/postal-system.json",
            "description": "Postal code system (e.g., 'us_zip', 'gb_outward'). System name encodes country and precision."
          },
          "values": {
            "description": "Postal codes within the system (e.g., ['10001', '10002'] for us_zip)",
            "items": {
              "type": "string"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "system",
          "values"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "geo_regions": {
      "description": "Restrict delivery to specific regions/states. ISO 3166-2 subdivision codes (e.g., 'US-CA', 'GB-SCT').",
      "items": {
        "pattern": "^[A-Z]{2}-[A-Z0-9]{1,3}$",
        "type": "string"
      },
      "type": "array"
    }
  },
  "title": "Targeting Overlay",
  "type": "object"
}