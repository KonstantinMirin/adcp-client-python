{
  "$defs": {
    "baseGroupAsset": {
      "properties": {
        "asset_id": {
          "description": "Identifier for this asset within the group",
          "type": "string"
        },
        "asset_role": {
          "description": "Optional descriptive label for this asset's purpose. Not used for referencing assets in manifests\u2014use asset_id instead. This field is for human-readable documentation and UI display only.",
          "type": "string"
        },
        "required": {
          "default": false,
          "description": "Whether this asset is required within each repetition of the group",
          "type": "boolean"
        }
      },
      "required": [
        "asset_id",
        "asset_type",
        "required"
      ],
      "type": "object"
    },
    "baseIndividualAsset": {
      "properties": {
        "asset_id": {
          "description": "Unique identifier for this asset. Creative manifests MUST use this exact value as the key in the assets object.",
          "type": "string"
        },
        "asset_role": {
          "description": "Optional descriptive label for this asset's purpose (e.g., 'hero_image', 'logo', 'third_party_tracking'). Not used for referencing assets in manifests\u2014use asset_id instead. This field is for human-readable documentation and UI display only.",
          "type": "string"
        },
        "item_type": {
          "const": "individual",
          "description": "Discriminator indicating this is an individual asset",
          "type": "string"
        },
        "required": {
          "description": "Whether this asset is required (true) or optional (false). Required assets must be provided for a valid creative. Optional assets enhance the creative but are not mandatory.",
          "type": "boolean"
        }
      },
      "required": [
        "item_type",
        "asset_id",
        "asset_type",
        "required"
      ],
      "type": "object"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Represents a creative format with its requirements",
  "properties": {
    "accepts_parameters": {
      "description": "List of parameters this format accepts in format_id. Template formats define which parameters (dimensions, duration, etc.) can be specified when instantiating the format. Empty or omitted means this is a concrete format with fixed parameters.",
      "items": {
        "$ref": "../enums/format-id-parameter.json"
      },
      "type": "array",
      "uniqueItems": true
    },
    "accessibility": {
      "description": "Accessibility posture of this format. Declares the WCAG conformance level that creatives produced by this format will meet.",
      "properties": {
        "requires_accessible_assets": {
          "description": "When true, all assets with x-accessibility fields must include those fields. For inspectable assets (image, video, audio), this means providing accessibility metadata like alt_text or captions. For opaque assets (HTML, JavaScript), this means providing self-declared accessibility properties.",
          "type": "boolean"
        },
        "wcag_level": {
          "$ref": "../enums/wcag-level.json",
          "description": "WCAG conformance level that this format achieves. For format-rendered creatives, the format guarantees this level. For opaque creatives, the format requires assets that self-certify to this level."
        }
      },
      "required": [
        "wcag_level"
      ],
      "type": "object"
    },
    "assets": {
      "description": "Array of all assets supported for this format. Each asset is identified by its asset_id, which must be used as the key in creative manifests. Use the 'required' boolean on each asset to indicate whether it's mandatory.",
      "items": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Image asset",
            "properties": {
              "asset_type": {
                "const": "image"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/image-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Video asset",
            "properties": {
              "asset_type": {
                "const": "video"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/video-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Audio asset",
            "properties": {
              "asset_type": {
                "const": "audio"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/audio-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Text asset",
            "properties": {
              "asset_type": {
                "const": "text"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/text-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Markdown asset",
            "properties": {
              "asset_type": {
                "const": "markdown"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/markdown-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "HTML asset",
            "properties": {
              "asset_type": {
                "const": "html"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/html-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "CSS asset",
            "properties": {
              "asset_type": {
                "const": "css"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/css-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "JavaScript asset",
            "properties": {
              "asset_type": {
                "const": "javascript"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/javascript-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "VAST asset",
            "properties": {
              "asset_type": {
                "const": "vast"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/vast-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "DAAST asset",
            "properties": {
              "asset_type": {
                "const": "daast"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/daast-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "URL asset",
            "properties": {
              "asset_type": {
                "const": "url"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/url-asset-requirements.json"
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/$defs/baseIndividualAsset"
              }
            ],
            "description": "Webhook asset",
            "properties": {
              "asset_type": {
                "const": "webhook"
              },
              "item_type": {
                "const": "individual"
              },
              "requirements": {
                "$ref": "requirements/webhook-asset-requirements.json"
              }
            }
          },
          {
            "description": "Repeatable asset group (for carousels, slideshows, playlists, etc.)",
            "properties": {
              "asset_group_id": {
                "description": "Identifier for this asset group (e.g., 'product', 'slide', 'card')",
                "type": "string"
              },
              "assets": {
                "description": "Assets within each repetition of this group",
                "items": {
                  "oneOf": [
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Image asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "image"
                        },
                        "requirements": {
                          "$ref": "requirements/image-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Video asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "video"
                        },
                        "requirements": {
                          "$ref": "requirements/video-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Audio asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "audio"
                        },
                        "requirements": {
                          "$ref": "requirements/audio-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Text asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "text"
                        },
                        "requirements": {
                          "$ref": "requirements/text-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Markdown asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "markdown"
                        },
                        "requirements": {
                          "$ref": "requirements/markdown-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "HTML asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "html"
                        },
                        "requirements": {
                          "$ref": "requirements/html-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "CSS asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "css"
                        },
                        "requirements": {
                          "$ref": "requirements/css-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "JavaScript asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "javascript"
                        },
                        "requirements": {
                          "$ref": "requirements/javascript-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "VAST asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "vast"
                        },
                        "requirements": {
                          "$ref": "requirements/vast-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "DAAST asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "daast"
                        },
                        "requirements": {
                          "$ref": "requirements/daast-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "URL asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "url"
                        },
                        "requirements": {
                          "$ref": "requirements/url-asset-requirements.json"
                        }
                      }
                    },
                    {
                      "allOf": [
                        {
                          "$ref": "#/$defs/baseGroupAsset"
                        }
                      ],
                      "description": "Webhook asset in group",
                      "properties": {
                        "asset_type": {
                          "const": "webhook"
                        },
                        "requirements": {
                          "$ref": "requirements/webhook-asset-requirements.json"
                        }
                      }
                    }
                  ]
                },
                "type": "array"
              },
              "item_type": {
                "const": "repeatable_group",
                "description": "Discriminator indicating this is a repeatable asset group",
                "type": "string"
              },
              "max_count": {
                "description": "Maximum number of repetitions allowed",
                "minimum": 1,
                "type": "integer"
              },
              "min_count": {
                "description": "Minimum number of repetitions required (if group is required) or allowed (if optional)",
                "minimum": 0,
                "type": "integer"
              },
              "required": {
                "description": "Whether this asset group is required. If true, at least min_count repetitions must be provided.",
                "type": "boolean"
              },
              "selection_mode": {
                "default": "sequential",
                "description": "How the platform uses repetitions of this group. 'sequential' means all items display in order (carousels, playlists). 'optimize' means the platform selects the best-performing combination from alternatives (asset group optimization like Meta Advantage+ or Google Pmax).",
                "enum": [
                  "sequential",
                  "optimize"
                ],
                "type": "string"
              }
            },
            "required": [
              "item_type",
              "asset_group_id",
              "required",
              "min_count",
              "max_count",
              "assets"
            ],
            "type": "object"
          }
        ]
      },
      "type": "array"
    },
    "catalog_requirements": {
      "description": "Catalog feeds this format requires for rendering. Formats that display product listings, store locators, inventory availability, or promotional pricing declare what catalog types must be synced to the account. Buyers ensure the required catalogs are synced via sync_catalogs before submitting creatives in this format.",
      "items": {
        "$ref": "requirements/catalog-requirements.json"
      },
      "minItems": 1,
      "type": "array"
    },
    "delivery": {
      "additionalProperties": true,
      "description": "Delivery method specifications (e.g., hosted, VAST, third-party tags)",
      "type": "object"
    },
    "description": {
      "description": "Plain text explanation of what this format does and what assets it requires",
      "type": "string"
    },
    "example_url": {
      "description": "Optional URL to showcase page with examples and interactive demos of this format",
      "format": "uri",
      "type": "string"
    },
    "format_card": {
      "additionalProperties": true,
      "description": "Optional standard visual card (300x400px) for displaying this format in user interfaces. Can be rendered via preview_creative or pre-generated.",
      "properties": {
        "format_id": {
          "$ref": "format-id.json",
          "description": "Creative format defining the card layout (typically format_card_standard)"
        },
        "manifest": {
          "additionalProperties": true,
          "description": "Asset manifest for rendering the card, structure defined by the format",
          "type": "object"
        }
      },
      "required": [
        "format_id",
        "manifest"
      ],
      "type": "object"
    },
    "format_card_detailed": {
      "additionalProperties": true,
      "description": "Optional detailed card with carousel and full specifications. Provides rich format documentation similar to ad spec pages.",
      "properties": {
        "format_id": {
          "$ref": "format-id.json",
          "description": "Creative format defining the detailed card layout (typically format_card_detailed)"
        },
        "manifest": {
          "additionalProperties": true,
          "description": "Asset manifest for rendering the detailed card, structure defined by the format",
          "type": "object"
        }
      },
      "required": [
        "format_id",
        "manifest"
      ],
      "type": "object"
    },
    "format_id": {
      "$ref": "format-id.json",
      "description": "Structured format identifier with agent URL and format name"
    },
    "input_format_ids": {
      "description": "Array of format IDs this format accepts as input creative manifests. When present, indicates this format can take existing creatives in these formats as input. Omit for formats that work from raw assets (images, text, etc.) rather than existing creatives.",
      "items": {
        "$ref": "format-id.json"
      },
      "type": "array"
    },
    "name": {
      "description": "Human-readable format name",
      "type": "string"
    },
    "output_format_ids": {
      "description": "Array of format IDs that this format can produce as output. When present, indicates this format can build creatives in these output formats (e.g., a multi-publisher template format might produce standard display formats across many publishers). Omit for formats that produce a single fixed output (the format itself).",
      "items": {
        "$ref": "format-id.json"
      },
      "type": "array"
    },
    "renders": {
      "description": "Specification of rendered pieces for this format. Most formats produce a single render. Companion ad formats (video + banner), adaptive formats, and multi-placement formats produce multiple renders. Each render specifies its role and dimensions.",
      "items": {
        "oneOf": [
          {
            "not": {
              "required": [
                "parameters_from_format_id"
              ]
            },
            "required": [
              "dimensions"
            ]
          },
          {
            "not": {
              "required": [
                "dimensions"
              ]
            },
            "properties": {
              "parameters_from_format_id": {
                "const": true
              }
            },
            "required": [
              "parameters_from_format_id"
            ]
          }
        ],
        "properties": {
          "dimensions": {
            "description": "Dimensions for this rendered piece (in pixels)",
            "properties": {
              "aspect_ratio": {
                "description": "Fixed aspect ratio constraint (e.g., '16:9', '4:3', '1:1')",
                "pattern": "^\\d+:\\d+$",
                "type": "string"
              },
              "height": {
                "description": "Fixed height in pixels",
                "minimum": 1,
                "type": "integer"
              },
              "max_height": {
                "description": "Maximum height in pixels for responsive renders",
                "minimum": 1,
                "type": "integer"
              },
              "max_width": {
                "description": "Maximum width in pixels for responsive renders",
                "minimum": 1,
                "type": "integer"
              },
              "min_height": {
                "description": "Minimum height in pixels for responsive renders",
                "minimum": 1,
                "type": "integer"
              },
              "min_width": {
                "description": "Minimum width in pixels for responsive renders",
                "minimum": 1,
                "type": "integer"
              },
              "responsive": {
                "description": "Indicates which dimensions are responsive/fluid",
                "properties": {
                  "height": {
                    "type": "boolean"
                  },
                  "width": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "width",
                  "height"
                ],
                "type": "object"
              },
              "width": {
                "description": "Fixed width in pixels",
                "minimum": 1,
                "type": "integer"
              }
            },
            "type": "object"
          },
          "parameters_from_format_id": {
            "description": "When true, parameters for this render (dimensions and/or duration) are specified in the format_id. Used for template formats that accept parameters. Mutually exclusive with specifying dimensions object explicitly.",
            "type": "boolean"
          },
          "role": {
            "description": "Semantic role of this rendered piece (e.g., 'primary', 'companion', 'mobile_variant')",
            "type": "string"
          }
        },
        "required": [
          "role"
        ],
        "type": "object"
      },
      "minItems": 1,
      "type": "array"
    },
    "reported_metrics": {
      "description": "Metrics this format can produce in delivery reporting. Buyers receive the intersection of format reported_metrics and product available_metrics. If omitted, the format defers entirely to product-level metric declarations.",
      "items": {
        "$ref": "../enums/available-metric.json"
      },
      "minItems": 1,
      "type": "array",
      "uniqueItems": true
    },
    "supported_macros": {
      "description": "List of universal macros supported by this format (e.g., MEDIA_BUY_ID, CACHEBUSTER, DEVICE_ID). Used for validation and developer tooling. See docs/creative/universal-macros.mdx for full documentation.",
      "items": {
        "oneOf": [
          {
            "$ref": "../enums/universal-macro.json"
          },
          {
            "description": "Custom or publisher-specific macro name",
            "type": "string"
          }
        ]
      },
      "type": "array"
    },
    "type": {
      "$ref": "../enums/format-category.json",
      "description": "DEPRECATED: High-level category for this format. Use the assets array to understand creative requirements instead - it provides precise information about what asset types are needed."
    }
  },
  "required": [
    "format_id",
    "name"
  ],
  "title": "Format",
  "type": "object"
}