{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Response payload for get_adcp_capabilities task. Protocol-level capability discovery across all AdCP protocols. Each domain protocol has its own capability section.",
  "properties": {
    "account": {
      "description": "Account management capabilities. Describes how accounts are established, what billing models are supported, and whether an account is required before browsing products.",
      "properties": {
        "authorization_endpoint": {
          "description": "OAuth authorization endpoint for obtaining operator-level credentials. Present when the seller supports OAuth for operator authentication. The agent directs the operator to this URL to authenticate and obtain a bearer token. If absent and require_operator_auth is true, operators obtain credentials out-of-band (e.g., seller portal, API key).",
          "format": "uri",
          "type": "string"
        },
        "default_billing": {
          "description": "The billing model applied when the agent omits billing from a sync_accounts request. Must be one of the values in supported_billing.",
          "enum": [
            "brand",
            "operator",
            "agent"
          ],
          "type": "string"
        },
        "require_operator_auth": {
          "default": false,
          "description": "Whether the seller requires operator-level credentials. When false (default), the seller trusts the agent's identity claims \u2014 the agent authenticates once and declares brands/operators via sync_accounts. When true, each operator must authenticate independently with the seller, and the agent opens a per-operator session using the operator's credential.",
          "type": "boolean"
        },
        "required_for_products": {
          "default": false,
          "description": "Whether an active account is required to call get_products. When true, the agent must establish an account via sync_accounts before browsing products. When false, get_products works without an account (account_id is optional for rate-card-specific pricing).",
          "type": "boolean"
        },
        "supported_billing": {
          "description": "Billing models this seller supports. brand: seller invoices the brand directly. operator: seller invoices the operator (agency). agent: agent consolidates billing.",
          "items": {
            "enum": [
              "brand",
              "operator",
              "agent"
            ],
            "type": "string"
          },
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "supported_billing"
      ],
      "type": "object"
    },
    "adcp": {
      "description": "Core AdCP protocol information",
      "properties": {
        "major_versions": {
          "description": "AdCP major versions supported by this seller. Major versions indicate breaking changes.",
          "items": {
            "minimum": 1,
            "type": "integer"
          },
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "major_versions"
      ],
      "type": "object"
    },
    "context": {
      "$ref": "../core/context.json"
    },
    "creative": {
      "additionalProperties": true,
      "description": "Creative protocol capabilities. Only present if creative is in supported_protocols.",
      "properties": {
        "supports_brief": {
          "description": "Whether this creative agent accepts creative_brief in build_creative requests for structured campaign-level creative direction",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "errors": {
      "description": "Task-specific errors and warnings",
      "items": {
        "$ref": "../core/error.json"
      },
      "type": "array"
    },
    "ext": {
      "$ref": "../core/ext.json"
    },
    "extensions_supported": {
      "description": "Extension namespaces this agent supports. Buyers can expect meaningful data in ext.{namespace} fields on responses from this agent. Extension schemas are published in the AdCP extension registry.",
      "items": {
        "description": "Extension namespace (lowercase alphanumeric with underscores, e.g., 'scope3', 'garm', 'iab_tcf')",
        "pattern": "^[a-z][a-z0-9_]*$",
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "governance": {
      "description": "Governance protocol capabilities. Only present if governance is in supported_protocols. Governance agents provide property data like compliance scores, brand safety ratings, and sustainability metrics.",
      "properties": {
        "property_features": {
          "description": "Property features this governance agent can evaluate. Each feature describes a score, rating, or certification the agent can provide for properties.",
          "items": {
            "properties": {
              "categories": {
                "description": "For categorical features, the valid values",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "description": {
                "description": "Human-readable description of what this feature measures",
                "type": "string"
              },
              "feature_id": {
                "description": "Unique identifier for this feature (e.g., 'consent_quality', 'coppa_certified', 'carbon_score')",
                "type": "string"
              },
              "methodology_url": {
                "description": "URL to documentation explaining how this feature is calculated or measured. Helps buyers understand and compare methodologies across vendors.",
                "format": "uri",
                "type": "string"
              },
              "range": {
                "description": "For quantitative features, the valid range",
                "properties": {
                  "max": {
                    "description": "Maximum value",
                    "type": "number"
                  },
                  "min": {
                    "description": "Minimum value",
                    "type": "number"
                  }
                },
                "required": [
                  "min",
                  "max"
                ],
                "type": "object"
              },
              "type": {
                "description": "Data type: 'binary' for yes/no, 'quantitative' for numeric scores, 'categorical' for enum values",
                "enum": [
                  "binary",
                  "quantitative",
                  "categorical"
                ],
                "type": "string"
              }
            },
            "required": [
              "feature_id",
              "type"
            ],
            "type": "object"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "last_updated": {
      "description": "ISO 8601 timestamp of when capabilities were last updated. Buyers can use this for cache invalidation.",
      "format": "date-time",
      "type": "string"
    },
    "media_buy": {
      "description": "Media-buy protocol capabilities. Only present if media_buy is in supported_protocols.",
      "properties": {
        "audience_targeting": {
          "additionalProperties": true,
          "description": "Audience targeting capabilities. Only present when features.audience_targeting is true.",
          "properties": {
            "matching_latency_hours": {
              "additionalProperties": false,
              "description": "Expected matching latency range in hours after upload. Use to calibrate polling cadence and set appropriate expectations before configuring push_notification_config.",
              "properties": {
                "max": {
                  "minimum": 0,
                  "type": "integer"
                },
                "min": {
                  "minimum": 0,
                  "type": "integer"
                }
              },
              "type": "object"
            },
            "minimum_audience_size": {
              "description": "Minimum matched audience size required for targeting. Audiences below this threshold will have status: too_small. Varies by platform (100\u20131000 is typical).",
              "minimum": 1,
              "type": "integer"
            },
            "supported_identifier_types": {
              "description": "Hashed PII types accepted for audience matching. Buyers should only send identifiers the seller supports.",
              "items": {
                "enum": [
                  "hashed_email",
                  "hashed_phone"
                ],
                "type": "string"
              },
              "minItems": 1,
              "type": "array"
            },
            "supported_uid_types": {
              "description": "Universal ID types accepted for audience matching (MAIDs, RampID, UID2, etc.). MAID support varies significantly by platform \u2014 check this field before sending uids with type: maid.",
              "items": {
                "$ref": "../enums/uid-type.json"
              },
              "minItems": 1,
              "type": "array"
            }
          },
          "required": [
            "supported_identifier_types",
            "minimum_audience_size"
          ],
          "type": "object"
        },
        "conversion_tracking": {
          "additionalProperties": true,
          "description": "Seller-level conversion tracking capabilities. Only present when features.conversion_tracking is true.",
          "properties": {
            "attribution_windows": {
              "description": "Attribution windows available from this seller. Single-element arrays indicate fixed windows; multi-element arrays indicate configurable options the buyer can choose from via optimization_goal.attribution_window on packages.",
              "items": {
                "additionalProperties": true,
                "properties": {
                  "click_through": {
                    "description": "Available click-through attribution windows (e.g. [\"7d\"], [\"7d\", \"14d\", \"30d\"])",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  },
                  "event_type": {
                    "$ref": "../enums/event-type.json",
                    "description": "Event type this window applies to, or omit for default window"
                  },
                  "view_through": {
                    "description": "Available view-through attribution windows (e.g. [\"1d\"], [\"1d\", \"7d\", \"14d\"])",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                },
                "required": [
                  "click_through"
                ],
                "type": "object"
              },
              "type": "array"
            },
            "supported_action_sources": {
              "description": "Action sources this seller accepts events from",
              "items": {
                "$ref": "../enums/action-source.json"
              },
              "minItems": 1,
              "type": "array"
            },
            "supported_event_types": {
              "description": "Event types this seller can track and attribute. If omitted, all standard event types are supported.",
              "items": {
                "$ref": "../enums/event-type.json"
              },
              "minItems": 1,
              "type": "array"
            },
            "supported_hashed_identifiers": {
              "description": "Hashed PII types accepted for user matching. Buyers must hash before sending (SHA-256, normalized).",
              "items": {
                "enum": [
                  "hashed_email",
                  "hashed_phone"
                ],
                "type": "string"
              },
              "minItems": 1,
              "type": "array"
            },
            "supported_uid_types": {
              "description": "Universal ID types accepted for user matching",
              "items": {
                "$ref": "../enums/uid-type.json"
              },
              "minItems": 1,
              "type": "array"
            }
          },
          "type": "object"
        },
        "execution": {
          "description": "Technical execution capabilities for media buying",
          "properties": {
            "axe_integrations": {
              "description": "Agentic ad exchange (AXE) integrations supported. URLs are canonical identifiers for exchanges this seller can execute through.",
              "items": {
                "format": "uri",
                "type": "string"
              },
              "type": "array"
            },
            "creative_specs": {
              "description": "Creative specification support",
              "properties": {
                "mraid_versions": {
                  "description": "MRAID versions supported for rich media mobile creatives",
                  "items": {
                    "pattern": "^[0-9]+\\.[0-9]+$",
                    "type": "string"
                  },
                  "type": "array"
                },
                "simid": {
                  "description": "SIMID support for interactive video ads",
                  "type": "boolean"
                },
                "vast_versions": {
                  "description": "VAST versions supported for video creatives",
                  "items": {
                    "pattern": "^[0-9]+\\.[0-9]+$",
                    "type": "string"
                  },
                  "type": "array"
                },
                "vpaid": {
                  "description": "VPAID support for interactive video ads",
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "targeting": {
              "description": "Targeting capabilities. If declared true/supported, buyer can use these targeting parameters and seller MUST honor them.",
              "properties": {
                "age_restriction": {
                  "description": "Age restriction capabilities for compliance (alcohol, gambling)",
                  "properties": {
                    "supported": {
                      "description": "Whether seller supports age restrictions",
                      "type": "boolean"
                    },
                    "verification_methods": {
                      "description": "Age verification methods this seller supports",
                      "items": {
                        "$ref": "../enums/age-verification-method.json"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "audience_exclude": {
                  "description": "Whether seller supports audience_exclude in targeting overlays (requires features.audience_targeting)",
                  "type": "boolean"
                },
                "audience_include": {
                  "description": "Whether seller supports audience_include in targeting overlays (requires features.audience_targeting)",
                  "type": "boolean"
                },
                "device_platform": {
                  "description": "Whether seller supports device platform targeting (Sec-CH-UA-Platform values)",
                  "type": "boolean"
                },
                "geo_countries": {
                  "description": "Supports country-level geo targeting using ISO 3166-1 alpha-2 codes (e.g., 'US', 'GB', 'DE')",
                  "type": "boolean"
                },
                "geo_metros": {
                  "description": "Metro area targeting support. Specifies which classification systems are supported.",
                  "properties": {
                    "eurostat_nuts2": {
                      "description": "Supports Eurostat NUTS Level 2 regions (EU)",
                      "type": "boolean"
                    },
                    "nielsen_dma": {
                      "description": "Supports Nielsen DMA codes (US market, e.g., '501' for NYC)",
                      "type": "boolean"
                    },
                    "uk_itl1": {
                      "description": "Supports UK ITL Level 1 regions",
                      "type": "boolean"
                    },
                    "uk_itl2": {
                      "description": "Supports UK ITL Level 2 regions",
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "geo_postal_areas": {
                  "description": "Postal area targeting support. Specifies which postal code systems are supported. System names encode country and precision.",
                  "properties": {
                    "au_postcode": {
                      "description": "Australian postcode, 4 digits (e.g., '2000')",
                      "type": "boolean"
                    },
                    "ca_fsa": {
                      "description": "Canadian Forward Sortation Area (e.g., 'K1A')",
                      "type": "boolean"
                    },
                    "ca_full": {
                      "description": "Canadian full postal code (e.g., 'K1A 0B1')",
                      "type": "boolean"
                    },
                    "de_plz": {
                      "description": "German Postleitzahl, 5 digits (e.g., '10115')",
                      "type": "boolean"
                    },
                    "fr_code_postal": {
                      "description": "French code postal, 5 digits (e.g., '75001')",
                      "type": "boolean"
                    },
                    "gb_full": {
                      "description": "UK full postcode (e.g., 'SW1A 1AA')",
                      "type": "boolean"
                    },
                    "gb_outward": {
                      "description": "UK postcode district / outward code (e.g., 'SW1', 'EC1')",
                      "type": "boolean"
                    },
                    "us_zip": {
                      "description": "US 5-digit ZIP codes (e.g., '10001')",
                      "type": "boolean"
                    },
                    "us_zip_plus_four": {
                      "description": "US 9-digit ZIP+4 codes (e.g., '10001-1234')",
                      "type": "boolean"
                    }
                  },
                  "type": "object"
                },
                "geo_regions": {
                  "description": "Supports region/state-level geo targeting using ISO 3166-2 subdivision codes (e.g., 'US-NY', 'GB-SCT', 'DE-BY')",
                  "type": "boolean"
                },
                "language": {
                  "description": "Whether seller supports language targeting (ISO 639-1 codes)",
                  "type": "boolean"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "features": {
          "$ref": "../core/media-buy-features.json"
        },
        "portfolio": {
          "description": "Information about the seller's media inventory portfolio",
          "properties": {
            "advertising_policies": {
              "description": "Advertising content policies, restrictions, and guidelines",
              "maxLength": 10000,
              "type": "string"
            },
            "description": {
              "description": "Markdown-formatted description of the inventory portfolio",
              "maxLength": 5000,
              "type": "string"
            },
            "primary_channels": {
              "description": "Primary advertising channels in this portfolio",
              "items": {
                "$ref": "../enums/channels.json"
              },
              "type": "array"
            },
            "primary_countries": {
              "description": "Primary countries (ISO 3166-1 alpha-2) where inventory is concentrated",
              "items": {
                "pattern": "^[A-Z]{2}$",
                "type": "string"
              },
              "type": "array"
            },
            "publisher_domains": {
              "description": "Publisher domains this seller is authorized to represent. Buyers should fetch each publisher's adagents.json for property definitions.",
              "items": {
                "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$",
                "type": "string"
              },
              "minItems": 1,
              "type": "array"
            }
          },
          "required": [
            "publisher_domains"
          ],
          "type": "object"
        }
      },
      "type": "object"
    },
    "signals": {
      "description": "Signals protocol capabilities. Only present if signals is in supported_protocols.",
      "properties": {
        "data_provider_domains": {
          "description": "Data provider domains this signals agent is authorized to resell. Buyers should fetch each data provider's adagents.json for signal catalog definitions and to verify authorization.",
          "items": {
            "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$",
            "type": "string"
          },
          "minItems": 1,
          "type": "array"
        },
        "features": {
          "additionalProperties": {
            "type": "boolean"
          },
          "description": "Optional signals features supported",
          "properties": {
            "catalog_signals": {
              "description": "Supports signals from data provider catalogs with structured signal_id references",
              "type": "boolean"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "sponsored_intelligence": {
      "description": "Sponsored Intelligence protocol capabilities. Only present if sponsored_intelligence is in supported_protocols. SI agents handle conversational brand experiences.",
      "properties": {
        "brand_url": {
          "description": "URL to brand.json with colors, fonts, logos, tone",
          "format": "uri",
          "type": "string"
        },
        "capabilities": {
          "$ref": "../sponsored-intelligence/si-capabilities.json",
          "description": "Modalities, components, and commerce capabilities"
        },
        "endpoint": {
          "description": "SI agent endpoint configuration",
          "properties": {
            "preferred": {
              "description": "Preferred transport when host supports multiple",
              "enum": [
                "mcp",
                "a2a"
              ],
              "type": "string"
            },
            "transports": {
              "description": "Available protocol transports. Hosts select based on their capabilities.",
              "items": {
                "additionalProperties": true,
                "properties": {
                  "type": {
                    "description": "Protocol transport type",
                    "enum": [
                      "mcp",
                      "a2a"
                    ],
                    "type": "string"
                  },
                  "url": {
                    "description": "Agent endpoint URL for this transport",
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "url"
                ],
                "type": "object"
              },
              "minItems": 1,
              "type": "array"
            }
          },
          "required": [
            "transports"
          ],
          "type": "object"
        }
      },
      "required": [
        "endpoint",
        "capabilities"
      ],
      "type": "object"
    },
    "supported_protocols": {
      "description": "Which AdCP domain protocols this seller supports",
      "items": {
        "enum": [
          "media_buy",
          "signals",
          "governance",
          "sponsored_intelligence",
          "creative"
        ],
        "type": "string"
      },
      "minItems": 1,
      "type": "array"
    }
  },
  "required": [
    "adcp",
    "supported_protocols"
  ],
  "title": "Get AdCP Capabilities Response",
  "type": "object"
}