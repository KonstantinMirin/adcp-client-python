{
  "$id": "/schemas/3.0.0-beta.2/property/feature-requirement.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "A feature-based requirement for property filtering. Use min_value/max_value for quantitative features, allowed_values for binary/categorical features.",
  "properties": {
    "allowed_values": {
      "description": "Values that pass the requirement (for binary/categorical features)",
      "items": {},
      "type": "array"
    },
    "feature_id": {
      "description": "Feature to evaluate (discovered via get_adcp_capabilities)",
      "type": "string"
    },
    "if_not_covered": {
      "default": "exclude",
      "description": "How to handle properties where this feature is not covered. 'exclude' (default): property is removed from the list. 'include': property passes this requirement (fail-open).",
      "enum": [
        "exclude",
        "include"
      ],
      "type": "string"
    },
    "max_value": {
      "description": "Maximum numeric value allowed (for quantitative features)",
      "type": "number"
    },
    "min_value": {
      "description": "Minimum numeric value required (for quantitative features)",
      "type": "number"
    }
  },
  "required": [
    "feature_id"
  ],
  "title": "Feature Requirement",
  "type": "object"
}